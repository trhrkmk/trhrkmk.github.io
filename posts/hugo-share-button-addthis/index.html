<!doctype html><html><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.83.1"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/reseter.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.3/new.min.css><link rel=stylesheet href=https://www.trhrkmk.com/css/syntax.css><link rel=stylesheet href=https://www.trhrkmk.com/css/custom.css><title>AddThisを使ってHugoに共有ボタン(Share Button)を追加する | trhrkmk.com</title><link rel=canonical href=https://www.trhrkmk.com/posts/hugo-share-button-addthis/><meta name=description content="  "><body><div id=wrapper><header><div class=head__inner><h1><a href=https://www.trhrkmk.com>trhrkmk.com</a></h1></div></header><div id=content><main><section class=entry><h2>AddThisを使ってHugoに共有ボタン(Share Button)を追加する</h2><p><strong>Hugoに共有ボタンを追加したい</strong>なと思い、調べて追加したのでメモ。</p><p>色々な方法があるとおもいますが、AddThisを使うことで簡単に追加できると思います。</p><h2 id=ググる>ググる</h2><p>ググってみると、すぐに見つかりました。</p><p>Hugoのコミュニティのページです。</p><p><a href=https://discourse.gohugo.io/t/share-buttons-for-blog-posts/12384>Share buttons for blog posts</a></p><p>このページに、実際の対応方法が書かれています。</p><p><a href=https://gohugohq.com/partials/add-this-social-sharing/>Add-This social sharing icons in Hugo Sites</a></p><h2 id=おおまかな流れ>おおまかな流れ</h2><ul><li>AddThisにサインアップ</li><li>AddThisの共有ボタンのデザインを設定する</li><li>AddThisのidを取得する</li><li>htmlを追加する</li><li>config.tomlに追加する</li><li>コードを追加する</li></ul><h2 id=addthisにサインアップ>AddThisにサインアップ</h2><p>なにはともあれ、AddThisにサインアップします。</p><p><a href=https://www.addthis.com>AddThis</a></p><h2 id=addthisの共有ボタンのデザインを設定する>AddThisの共有ボタンのデザインを設定する</h2><p>共有ボタンのデザインを設定します。</p><p><img src=./hugo-share-button-addthis-3.webp alt=addthis title=addthis></p><p><img src=./hugo-share-button-addthis-4.webp alt=addthis title=addthis></p><h2 id=addthisのidを取得する>AddThisのidを取得する</h2><p>Profile Settingsのページに<code>ra-</code>から始まる<code>id</code>がありますので、コピっておきます。</p><p><img src=./hugo-share-button-addthis-2.webp alt=addthis title=addthis></p><h2 id=htmlを追加する>htmlを追加する</h2><h3 id=partialsaddthishtml>partials/addthis.html</h3><div class=highlight><pre class=chroma><code class=language-html data-lang=html><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;addthis_inline_share_toolbox&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</code></pre></div><h3 id=partialsaddthis-scripthtml>partials/addthis-script.html</h3><p>Hugoのサイトでは、以下のようになっています。</p><p>以下のコードを設置したあとに、Twitterで共有してみると、トラック目的のハッシュタグが入りました。</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=o>&lt;</span><span class=nx>script</span> <span class=nx>type</span><span class=o>=</span><span class=s2>&#34;text/javascript&#34;</span> <span class=nx>src</span><span class=o>=</span><span class=s2>&#34;//s7.addthis.com/js/300/addthis_widget.js#pubid={{- .Site.Params.addThis -}}&#34;</span> <span class=kr>async</span><span class=o>&gt;&lt;</span><span class=err>/script&gt;</span>
</code></pre></div><h3 id=partialsaddthishtmlトラッキングコードをfalseにする>partials/addthis.html(トラッキングコードをfalseにする)</h3><p>不要なコードを入れたくないので、コードをfalseにするためのスクリプトを追加します。</p><p>AddThisのサイトを参照してください。</p><p><a href=http://www.addthis.com/academy/removing-hashtags-anchors-and-tracking-codes-from-your-urls/>Removing Hashtags, Anchors, and Tracking Codes from Your URLs</a></p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=o>&lt;</span><span class=nx>script</span> <span class=nx>type</span><span class=o>=</span><span class=s2>&#34;text/javascript&#34;</span> <span class=nx>src</span><span class=o>=</span><span class=s2>&#34;//s7.addthis.com/js/300/addthis_widget.js#pubid={{- .Site.Params.addThis -}}&#34;</span> <span class=kr>async</span><span class=o>&gt;&lt;</span><span class=err>/script&gt;</span>
<span class=err>​</span><span class=o>&lt;</span><span class=nx>script</span> <span class=nx>type</span><span class=o>=</span><span class=s2>&#34;text/javascript&#34;</span><span class=o>&gt;</span>
    <span class=kd>var</span> <span class=nx>addthis_config</span> <span class=o>=</span> <span class=nx>addthis_config</span><span class=o>||</span><span class=p>{};</span>
    <span class=nx>addthis_config</span><span class=p>.</span><span class=nx>data_track_addressbar</span> <span class=o>=</span> <span class=kc>false</span><span class=p>;</span>
    <span class=nx>addthis_config</span><span class=p>.</span><span class=nx>data_track_clickback</span> <span class=o>=</span> <span class=kc>false</span><span class=p>;</span>
<span class=o>&lt;</span><span class=err>/script&gt;</span>
</code></pre></div><h2 id=configtomlに追加する>config.tomlに追加する</h2><h3 id=configtoml>./config.toml</h3><div class=highlight><pre class=chroma><code class=language-toml data-lang=toml><span class=p>[</span><span class=nx>params</span><span class=p>]</span>
    <span class=nx>addThis</span> <span class=p>=</span> <span class=s2>&#34;ra-123456789ABCDEF&#34;</span>
</code></pre></div><h2 id=コードを追加する>コードを追加する</h2><p>自分のテーマに合わせて、追加してください。</p><div class=highlight><pre class=chroma><code class=language-html data-lang=html><span class=cp>&lt;!DOCTYPE html&gt;</span>
<span class=p>&lt;</span><span class=nt>html</span> <span class=na>lang</span><span class=o>=</span><span class=s>&#34;en&#34;</span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>just a test<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>

{{ partial &#34;addthis&#34; . }}

<span class=c>&lt;!-- some content !--&gt;</span>

{{ partial &#34;addthis-script&#34; . }}
<span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</code></pre></div><h2 id=サイトを確認する>サイトを確認する</h2><p>うまく設定できれば、このように表示されると思います。</p><p><img src=./hugo-share-button-addthis-5.webp alt=addthis title=addthis></p><h2 id=あとがき>あとがき</h2><p>Hugoで記事を書いたり更新することに慣れてきました。</p><p><strong>Markdown</strong>最高！</p><p>Hugoで記事を書く時は、<strong>JetBrains</strong>の<strong>WebStorm</strong>で書いています。</p><p>ちなみに、JetBrainsの製品を使う際には、必ず<strong>IdeaVim</strong>というプラグインを入れています。</p><p>全く記事に関係ないけど<strong>Goland</strong>最高！</p></section></main></div><footer><div class=foot__inner><p class=copyright>Copyright © 2019-2021 Teruhiro Komaki <a href=https://twitter.com/trhrkmk>@trhrkmk</a></p></div></footer></div></body></html>